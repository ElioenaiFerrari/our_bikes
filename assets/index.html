<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>

  <button id="reserve">Reservar</button>
  <button id="use">Usar</button>
  <button id="giveBack">Devolver</button>
</head>
<body>
  
</body>
<script>
  const reserveButton = document.getElementById('reserve');
  const useButton = document.getElementById('use');
  const giveBackButton = document.getElementById('giveBack');

  const reserve = (bikeId, platformId)=>({
    type: 'reserve',
    bike_id: bikeId,
    platform_id: platformId
  })

  const use = (bikeId, platformId)=>({
    type: 'use',
    bike_id: bikeId,
    platform_id: platformId
  })

  const giveBack = (bikeId, platformId)=>({
    type: 'give_back',
    bike_id: bikeId,
    platform_id: platformId
  })

  const ws = new WebSocket('ws://localhost:4000/ws/dbd4074a-2ed1-43b3-9136-3ccba248d235');


  reserveButton.addEventListener('click', (e)=>{
    e.preventDefault()
    ws.send(JSON.stringify(reserve('95079c32-beec-4b23-8ad6-59a2bb0a0b72', '332109a8-45f0-40e5-aa72-51ea598befe9')))
  })

  useButton.addEventListener('click', (e)=>{
    e.preventDefault()
    ws.send(JSON.stringify(use('95079c32-beec-4b23-8ad6-59a2bb0a0b72', '332109a8-45f0-40e5-aa72-51ea598befe9')))
  })

  giveBackButton.addEventListener('click', (e)=>{
    e.preventDefault()
    ws.send(JSON.stringify(giveBack('95079c32-beec-4b23-8ad6-59a2bb0a0b72', '332109a8-45f0-40e5-aa72-51ea598befe9')))
  })

  ws.onmessage = (msg) => {
    console.log(msg.data);
  }

  ws.onopen = () => {
    console.log('connected');
  }



</script>
</html>